---

- name: Copy .zshrc configuration.
  ansible.builtin.template:
    src:  "nix_zshrc.j2"
    dest: "{{ ansible_facts['user_dir'] }}/.zshrc"
    mode: "0o700"
    owner: "{{ ansible_facts['user_uid'] }}"
    group: "{{ ansible_facts['user_gid'] }}"
  register: zshrc_copied
  notify: Source .zshrc
  when: ansible_facts["os_family"] | lower == "debian"

- name: Flush Handlers
  ansible.builtin.meta: flush_handlers
  when: zshrc_copied is changed
  